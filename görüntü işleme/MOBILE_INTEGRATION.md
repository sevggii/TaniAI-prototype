# üì± Tanƒ±AI Mobil Entegrasyon Rehberi

## üéØ Mobil Uygulama Entegrasyonu

Bu rehber, Tanƒ±AI Radyolojik G√∂r√ºnt√º Analizi sistemini mobil uygulamanƒ±za entegre etmek i√ßin gerekli t√ºm bilgileri i√ßerir.

## üöÄ Hƒ±zlƒ± Ba≈ülangƒ±√ß

### 1. API Baƒülantƒ±sƒ±
```javascript
// JavaScript/React Native
const API_BASE_URL = "https://your-api-domain.com";
const API_KEY = "your_mobile_api_key";

// G√∂r√ºnt√º analizi
const analyzeImage = async (imageBase64) => {
  const response = await fetch(`${API_BASE_URL}/mobile/analyze`, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': `Bearer ${API_KEY}`
    },
    body: JSON.stringify({
      image_data: imageBase64,
      analysis_type: "basic",
      target_size: "224,224"
    })
  });
  
  return await response.json();
};
```

### 2. Android (Kotlin/Java)
```kotlin
// Android - Retrofit ile
interface RadiologyAPI {
    @POST("mobile/analyze")
    suspend fun analyzeImage(
        @Header("Authorization") token: String,
        @Body request: AnalysisRequest
    ): Response<AnalysisResponse>
}

data class AnalysisRequest(
    val image_data: String,
    val analysis_type: String = "basic",
    val target_size: String = "224,224"
)
```

### 3. iOS (Swift)
```swift
// iOS - URLSession ile
struct RadiologyAPI {
    static let baseURL = "https://your-api-domain.com"
    static let apiKey = "your_mobile_api_key"
    
    static func analyzeImage(imageData: String) async throws -> AnalysisResponse {
        let url = URL(string: "\(baseURL)/mobile/analyze")!
        var request = URLRequest(url: url)
        request.httpMethod = "POST"
        request.setValue("Bearer \(apiKey)", forHTTPHeaderField: "Authorization")
        request.setValue("application/json", forHTTPHeaderField: "Content-Type")
        
        let body = AnalysisRequest(
            image_data: imageData,
            analysis_type: "basic",
            target_size: "224,224"
        )
        
        request.httpBody = try JSONEncoder().encode(body)
        
        let (data, _) = try await URLSession.shared.data(for: request)
        return try JSONDecoder().decode(AnalysisResponse.self, from: data)
    }
}
```

## üì° API Endpoint'leri

### üîç Tek G√∂r√ºnt√º Analizi
```http
POST /mobile/analyze
Content-Type: application/json
Authorization: Bearer your_api_key

{
  "image_data": "base64_encoded_image",
  "analysis_type": "basic|advanced|medical",
  "target_size": "224,224"
}
```

**Yanƒ±t:**
```json
{
  "success": true,
  "data": {
    "analysis_type": "basic",
    "features": {
      "mean_intensity": 128.5,
      "std_intensity": 45.2,
      "histogram_entropy": 7.8
    },
    "processing_info": {
      "original_size": [1024, 1024],
      "target_size": [224, 224],
      "file_size": 15678,
      "mobile_optimized": true
    }
  },
  "mobile_optimized": true,
  "timestamp": "2024-01-15T10:30:00Z"
}
```

### üìä Toplu Analiz
```http
POST /mobile/batch-analyze
Content-Type: application/json
Authorization: Bearer your_api_key

{
  "images": ["base64_image1", "base64_image2"],
  "analysis_type": "basic"
}
```

### üñºÔ∏è G√∂r√ºnt√º Optimizasyonu
```http
POST /mobile/optimize-image
Content-Type: application/json
Authorization: Bearer your_api_key

{
  "image_data": "base64_encoded_image",
  "target_size": "224,224",
  "quality": 85
}
```

## üîß Performans Optimizasyonu

### 1. G√∂r√ºnt√º Boyutu Optimizasyonu
```javascript
// G√∂r√ºnt√ºy√º mobil i√ßin optimize et
const optimizeImage = async (imageFile) => {
  const canvas = document.createElement('canvas');
  const ctx = canvas.getContext('2d');
  
  // Hedef boyut
  const targetSize = 224;
  canvas.width = targetSize;
  canvas.height = targetSize;
  
  // G√∂r√ºnt√ºy√º √ßiz
  ctx.drawImage(imageFile, 0, 0, targetSize, targetSize);
  
  // Base64'e √ßevir
  return canvas.toDataURL('image/jpeg', 0.85).split(',')[1];
};
```

### 2. Cache Y√∂netimi
```javascript
// Basit cache implementasyonu
class ImageCache {
  constructor(maxSize = 50) {
    this.cache = new Map();
    this.maxSize = maxSize;
  }
  
  set(key, value) {
    if (this.cache.size >= this.maxSize) {
      const firstKey = this.cache.keys().next().value;
      this.cache.delete(firstKey);
    }
    this.cache.set(key, value);
  }
  
  get(key) {
    return this.cache.get(key);
  }
}
```

### 3. Offline Desteƒüi
```javascript
// Service Worker ile offline analiz
self.addEventListener('fetch', (event) => {
  if (event.request.url.includes('/mobile/analyze')) {
    event.respondWith(
      caches.match(event.request).then((response) => {
        return response || fetch(event.request);
      })
    );
  }
});
```

## üõ°Ô∏è G√ºvenlik

### 1. API Anahtarƒ± Y√∂netimi
```javascript
// G√ºvenli API anahtarƒ± saklama
const getApiKey = () => {
  // Production'da g√ºvenli storage kullanƒ±n
  return process.env.REACT_APP_API_KEY || 'dev_key_123';
};
```

### 2. Veri ≈ûifreleme
```javascript
// Hassas verileri ≈üifrele
import CryptoJS from 'crypto-js';

const encryptData = (data, key) => {
  return CryptoJS.AES.encrypt(JSON.stringify(data), key).toString();
};

const decryptData = (encryptedData, key) => {
  const bytes = CryptoJS.AES.decrypt(encryptedData, key);
  return JSON.parse(bytes.toString(CryptoJS.enc.Utf8));
};
```

## üìä Hata Y√∂netimi

### 1. Retry Mekanizmasƒ±
```javascript
const analyzeWithRetry = async (imageData, maxRetries = 3) => {
  for (let i = 0; i < maxRetries; i++) {
    try {
      const result = await analyzeImage(imageData);
      return result;
    } catch (error) {
      if (i === maxRetries - 1) throw error;
      await new Promise(resolve => setTimeout(resolve, 1000 * (i + 1)));
    }
  }
};
```

### 2. Hata Kodlarƒ±
```javascript
const handleApiError = (error) => {
  switch (error.status) {
    case 400:
      return "Ge√ßersiz g√∂r√ºnt√º formatƒ±";
    case 401:
      return "API anahtarƒ± ge√ßersiz";
    case 429:
      return "√áok fazla istek, l√ºtfen bekleyin";
    case 500:
      return "Sunucu hatasƒ±, l√ºtfen tekrar deneyin";
    default:
      return "Bilinmeyen hata olu≈ütu";
  }
};
```

## üé® UI/UX √ñnerileri

### 1. Y√ºkleme Durumu
```javascript
const AnalysisComponent = () => {
  const [loading, setLoading] = useState(false);
  const [progress, setProgress] = useState(0);
  
  const analyzeImage = async (image) => {
    setLoading(true);
    setProgress(0);
    
    // Progress simulation
    const interval = setInterval(() => {
      setProgress(prev => Math.min(prev + 10, 90));
    }, 200);
    
    try {
      const result = await analyzeImageAPI(image);
      setProgress(100);
      return result;
    } finally {
      clearInterval(interval);
      setLoading(false);
    }
  };
  
  return (
    <div>
      {loading && <ProgressBar value={progress} />}
      {/* UI components */}
    </div>
  );
};
```

### 2. Sonu√ß G√∂sterimi
```javascript
const ResultDisplay = ({ analysisResult }) => {
  if (!analysisResult.success) {
    return <ErrorComponent error={analysisResult.error} />;
  }
  
  return (
    <div className="result-container">
      <h3>Analiz Sonucu</h3>
      <div className="features">
        {Object.entries(analysisResult.data.features).map(([key, value]) => (
          <div key={key} className="feature-item">
            <span className="feature-name">{key}:</span>
            <span className="feature-value">{value}</span>
          </div>
        ))}
      </div>
    </div>
  );
};
```

## üì± Platform √ñzel Entegrasyonlar

### React Native
```javascript
// react-native-image-picker ile
import { launchImageLibrary } from 'react-native-image-picker';

const selectAndAnalyzeImage = () => {
  launchImageLibrary({ mediaType: 'photo' }, (response) => {
    if (response.assets && response.assets[0]) {
      const imageUri = response.assets[0].uri;
      const base64 = convertToBase64(imageUri);
      analyzeImage(base64);
    }
  });
};
```

### Flutter
```dart
// Flutter ile
import 'package:image_picker/image_picker.dart';
import 'package:http/http.dart' as http;

class RadiologyService {
  static Future<Map<String, dynamic>> analyzeImage(String base64Image) async {
    final response = await http.post(
      Uri.parse('$baseUrl/mobile/analyze'),
      headers: {
        'Content-Type': 'application/json',
        'Authorization': 'Bearer $apiKey',
      },
      body: jsonEncode({
        'image_data': base64Image,
        'analysis_type': 'basic',
        'target_size': '224,224',
      }),
    );
    
    return jsonDecode(response.body);
  }
}
```

## üîç Test ve Debug

### 1. Unit Testler
```javascript
// Jest ile test
describe('RadiologyAPI', () => {
  test('should analyze image successfully', async () => {
    const mockImage = 'data:image/jpeg;base64,/9j/4AAQ...';
    const result = await analyzeImage(mockImage);
    
    expect(result.success).toBe(true);
    expect(result.data.features).toBeDefined();
  });
});
```

### 2. Debug Ara√ßlarƒ±
```javascript
// Debug modunda detaylƒ± log
const debugAnalyze = async (imageData) => {
  console.log('üîç Analiz ba≈ülatƒ±lƒ±yor...');
  console.log('üìä G√∂r√ºnt√º boyutu:', imageData.length);
  
  const startTime = Date.now();
  const result = await analyzeImage(imageData);
  const duration = Date.now() - startTime;
  
  console.log('‚è±Ô∏è Analiz s√ºresi:', duration + 'ms');
  console.log('‚úÖ Sonu√ß:', result);
  
  return result;
};
```

## üìà Performans Metrikleri

### Beklenen Performans
- **Tek G√∂r√ºnt√º Analizi**: 2-5 saniye
- **Toplu Analiz (10 g√∂r√ºnt√º)**: 15-30 saniye
- **G√∂r√ºnt√º Optimizasyonu**: <1 saniye
- **API Yanƒ±t S√ºresi**: <500ms

### Optimizasyon ƒ∞pu√ßlarƒ±
1. **G√∂r√ºnt√º boyutunu k√º√ß√ºlt√ºn** (224x224 √∂nerilen)
2. **JPEG kalitesini d√º≈ü√ºr√ºn** (85% yeterli)
3. **Cache kullanƒ±n** tekrarlayan analizler i√ßin
4. **Batch analiz** yapƒ±n m√ºmk√ºn olduƒüunda
5. **Offline mod** ekleyin temel analizler i√ßin

## üÜò Destek

### Hata Raporlama
```javascript
const reportError = async (error, context) => {
  await fetch('/mobile/error-report', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      error: error.message,
      stack: error.stack,
      context: context,
      timestamp: new Date().toISOString(),
      userAgent: navigator.userAgent
    })
  });
};
```

### ƒ∞leti≈üim
- **Email**: mobile-support@taniai.com
- **Dok√ºmantasyon**: https://docs.taniai.com/mobile
- **GitHub**: https://github.com/taniai/mobile-sdk

---

**‚ö†Ô∏è √ñnemli Notlar:**
- API anahtarlarƒ±nƒ±zƒ± g√ºvenli tutun
- Rate limit'lere dikkat edin
- Offline mod i√ßin local storage kullanƒ±n
- Test ortamƒ±nda √∂nce deneyin
- Production'da HTTPS kullanƒ±n
